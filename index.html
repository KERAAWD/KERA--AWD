<head>
  <link rel="stylesheet" type="text/css" href="stmarkdown.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>
</head><a id="top"></a>
<h2 style="
  background: 
    linear-gradient(to right, rgba(179, 157, 219, 0.85), rgba(209, 196, 233, 0.85)), 
    url('header.png');
  background-size: cover;
  background-position: center;
  padding: 10px 25px;
  border-radius: 10px;
  display: flex;
  justify-content: center;   /* horizontal center */
  align-items: center;       /* vertical center */
  height: 130px;
  margin: 0;
">
<span style="
    font-size: 48px;
    font-weight: 900;
    letter-spacing: 4px;
    font-family: 'Segoe UI', sans-serif;
    color: #2E7D32;                 /* Green text */
    -webkit-text-stroke: 1.5px black;  /* Black border */
    text-shadow: 2px 2px 4px rgba(0,0,0,0.25);
">
    KERA-AWD
</span>
</h2>
<!-- HEADER WITH TABS + SEARCH + DOWNLOAD--> 
<html>
<head>
<meta charset="utf-8">
<title>Dashboard √¢‚Ç¨‚Äù tabs + subtabs + search + PDF</title>
<style>
  :root {
  --main-green: #4CAF50;
  --main-green-dark: #2E7D32;
  --sub-bg: #e8f7f0;
  --sub-pill: #00796b;
}

object-fit: cover;
width: 100%;
height: 100%;

body {
  font-family: Arial, sans-serif;
  margin: 0;
  background: #fafafa;
}


/* Top bar with tabs left, search right */
.tab-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: linear-gradient(to right, #111, #333);
  padding: 8px 12px;
  position: sticky;
  margin-top: 0;
  top: 0;
  z-index: 500;
  color: white;
}
.tab-links {
  display: flex;
  gap: 6px;
}
.tab-link {
  background: transparent;
  border: none;
  color: white;
  cursor: pointer;
  padding: 8px 12px;
  font-weight: 600;
  border-radius: 6px;
}
.tab-link:hover { background: rgba(255,255,255,0.08); }
.tab-link.active { background: rgba(0,0,0,0.12); }

body {
  margin: 0;
}

h1, h2, h3 {
  margin: 0;
}

.search-box {
  display: flex;
  align-items: center;
}
.search-box input {
  padding: 6px 8px;
  border-radius: 6px;
  border: none;
  outline: none;
  width: 220px;
}
.search-box button {
  margin-left: 6px;
  padding: 6px 10px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  background: var(--main-green-dark);
  color: white;
  font-weight: 600;
}

/* Container + tab contents */
.container {
  padding: 16px;
  max-width: 1200px;
  margin: 70px auto 80px;
}
.tab-content {
  display: none;
  background: white;
  padding: 16px;
  border: 1px solid #e0e0e0;
  border-radius: 6px;
}
.tab-content.active { display: block; }

/* Subtabs for Production */
.production-subtab-area {
  display: none;
  background: var(--sub-bg);
  padding: 8px 12px;
  border-bottom: 1px solid rgba(0,0,0,0.06);
}
.sub-tab-link {
  background: transparent;
  border: 1px solid var(--sub-pill);
  color: var(--sub-pill);
  padding: 6px 10px;
  border-radius: 12px;
  cursor: pointer;
  margin-right: 8px;
}
.sub-tab-link.active {
  background: var(--sub-pill);
  color: white;
}

/* Highlight search */
mark.highlight {
  background: yellow;
  color: black;
}

/* Responsive */
@media (max-width: 760px) {
  .search-box input { width: 120px; }
  .tab-links { overflow-x: auto; }
}

/* Show all tabs in print mode */
.print-mode .tab-content {
  display: block !important;
}

//Hiding image tab during printing
.print-mode #image {
  display: none !important;
}


/* Show all subtabs in print mode */
.print-visible {
  display: block !important;
}

.green-note {
  background-color: #e6f4ea; /* light green */
  border-left: 6px solid #4CAF50; /* darker green stripe */
  padding: 10px 14px;
  margin: 12px 0;
  border-radius: 6px;
  font-size: 14px;
  font-style: italic;
  color: #2E7D32; /* dark green text */
}
.tab-content {
    padding-bottom: 70px; /* height of footer + some space */
}

mark.highlight {
  background: yellow;
}

mark.active-match {
  background: orange;
}

@keyframes multiFlash {
  0%   { color: #ffffff; }
  25%  { color: #ffeb3b; }   /* yellow */
  50%  { color: #4CAF50; }   /* green */
  75%  { color: #00bcd4; }   /* blue */
  100% { color: #ffffff; }
}

.flashing-tab {
  animation: multiFlash 1.5s infinite;
  font-weight: 700;
}

</style>
</head>
<body>
<div id="dashboardContent">
<!-- Tab bar -->
<div class="tab-bar">
  <div class="tab-links">
    <button class="tab-link active" data-target="home" onclick="openTab(event,'home')">Home</button>
    <button class="tab-link" data-target="aow" onclick="openTab(event,'aow')">Areas of Work (AoW) </button>
    <a href="dashboard.html" class="tab-link flashing-tab">LCAS Dashboard</a>
    <button class="tab-link" data-target="knowledge" onclick="openTab(event,'knowledge')">Knowledge products</button>
    <button class="tab-link" data-target="image" onclick="openTab(event,'image')"> üì∑Image gallery </button>
    <button class="tab-link" data-target="contact" onclick="openTab(event,'contact')">Contact us </button>
  </div>
  <div class="search-box">
    <input id="searchInput" placeholder="Search...">
    <button id="searchBtn">üîç</button>
    <button id="clearSearch">‚úñ</button>
  </div>
</div>
<div class="container">
<div id="home" class="tab-content active">
<h4 style="color:darkblue;margin-top:5px;"><strong> üè† Background</strong></h4>
<p>To address the need and opportunity to reduce GHG emissions in rice without jeopardizing food security and other sustainable development goals, the Government of Kerala (GoK), with support from the World Bank (WB), seeks to (1) identify and target agronomic practices for low-carbon rice production, (2) scale these GHG mitigation practices across Kerala, and (3) connect the farmers to credible payment for ecosystem services like carbon offset markets as a role model for integrative and evidence-led mitigation programming that can be scaled across India. This will empower the GoK and the burgeoning carbon offset markets in South Asia to position investments in agricultural development towards solutions that contribute to multiple sustainable development goals and accelerate efforts to decarbonize the agricultural sector.</p>
<h4 style="color:darkblue;margin-top:5px;"><strong> Areas of Work</strong></h4>
<p>To achieve the objectives mentioned above, the project will implement six interrelated Areas of Work (AoW) shown below.</p>
<div style="text-align:center;">
    <img src="Aows.png" alt="Kerala" width="500">
</div>
</div>
<!-- SUBSECTION  :AoW -->
<div id="aow" class="tab-content">
<h3>AoW1</h3>
</div>
<!-- SUBSECTION  :Knowledge products -->
<div id="knowledge" class="tab-content">
<h3>Brochures</h3>
  <ul>
    <li>
      <a href="knowledge-products/brochures/KERA AWD Brochure English.pdf" download>
        KERA AWD Brochure English
      </a>
    </li>
  </ul>
</div>
<!-- SUBSECTION  :Image gallery -->
<div id="image" class="tab-content">
<div class="gallery-item">
  <img src="Interview1.jpg" style="width:60px;">
  <br>
  <a href="Interview1.jpg" download>Download</a>
</div>
</div>
<!-- SUBSECTION  :Contact Us-->
<div id="contact" class="tab-content">
<h3>Contact us at</h3>
<p>
  <strong style="
    background: linear-gradient(90deg, #2E7D32, #1E88E5, #8E24AA, #F4511E);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  ">
    E-mail
  </strong>:
  keraawd1@gmail.com; keraawdnews@gmail.com
</p>
</div>
</div>
<!-- FOOTER -->
<div id="footer-bar" style="
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: #fff8e1;  /* light cream */
    border-top: 1px solid #ccc;
    padding: 8px 0;
    display: flex;
    justify-content: space-evenly;
    align-items: center;
    z-index: 1000;
    box-shadow: 0 -2px 6px rgba(0,0,0,0.15);  /* subtle shadow */
">
    <img src="Logo5.png" alt="Institution 1" style="height: 40px;">
    <img src="Logo2.jpeg" alt="Institution 2" style="height: 40px;">
    <img src="Logo3.jpeg" alt="Institution 3" style="height: 40px;">
    <img src="cwrdm.jpeg" alt="Institution 4" style="height: 40px;">
</div>
<script>

function openTab(evt, tabId) {
  // Hide all main contents
  document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.tab-link').forEach(btn => btn.classList.remove('active'));

  // Show clicked
  document.getElementById(tabId).classList.add('active');
  evt.currentTarget.classList.add('active');

  // Show subtabs only for Production
  const prodArea = document.getElementById('productionSubtabsArea');
  if (tabId === 'production') {
    prodArea.style.display = 'block';
    openSubTab(null, 'prod1');
  } else if (prodArea) {
    prodArea.style.display = 'none';
  }
}

function openSubTab(evt, subId) {
  document.querySelectorAll('#production .sub-tab-content').forEach(el => el.style.display = 'none');
  document.querySelectorAll('#production .sub-tab-link').forEach(btn => btn.classList.remove('active'));
  document.getElementById(subId).style.display = 'block';
  if (evt) evt.currentTarget.classList.add('active');
}

//Search 
let matches = [];
let currentIndex = -1;

const dashboard = document.getElementById('dashboardContent');

// Remove highlights
function removeHighlights(container) {
  container.querySelectorAll('mark.highlight')
    .forEach(m => m.replaceWith(m.textContent));

  matches = [];
  currentIndex = -1;
}

// Highlight text
function highlight(container, text) {
  if (!text) return;

  const regex = new RegExp(text, 'gi');
  container.innerHTML = container.innerHTML.replace(
    regex,
    match => `<mark class="highlight">${match}</mark>`
  );

  matches = Array.from(container.querySelectorAll('mark.highlight'));
}

// Activate tab if match is inside hidden tab
function activateTabContaining(element) {
  const tabContent = element.closest('.tab-content');
  if (!tabContent) return;

  // Remove active from all
  document.querySelectorAll('.tab-content')
    .forEach(t => t.classList.remove('active'));

  // Activate correct tab
  tabContent.classList.add('active');
}

// Scroll to match
function scrollToMatch(index) {
  if (matches.length === 0) return;

  matches.forEach(m => m.classList.remove('active-match'));

  currentIndex = index % matches.length;
  if (currentIndex < 0) currentIndex = matches.length - 1;

  const el = matches[currentIndex];

  activateTabContaining(el);

  el.classList.add('active-match');

  el.scrollIntoView({
    behavior: 'smooth',
    block: 'center'
  });
}

// Search button
document.getElementById('searchBtn').addEventListener('click', () => {
  const q = document.getElementById('searchInput').value.trim();

  removeHighlights(dashboard);

  if (q) {
    highlight(dashboard, q);
    if (matches.length > 0) {
      scrollToMatch(0);
    }
  }
});

// Enter key √¢‚Ä†‚Äô next match
document.getElementById('searchInput').addEventListener('keydown', (e) => {
  if (e.key === 'Enter') {
    e.preventDefault();
    if (matches.length > 0) {
      scrollToMatch(currentIndex + 1);
    }
  }
});

// Clear
document.getElementById('clearSearch').addEventListener('click', () => {
  removeHighlights(dashboard);
  document.getElementById('searchInput').value = '';
});

  // Also open all production subtabs
  document.querySelectorAll('.sub-tab-content').forEach(st => st.classList.add('print-visible'));


</script>
</body>
